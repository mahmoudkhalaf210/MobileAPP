# ูุง ูู WebSocketุ - What is WebSocket?

## ๐ **ููุฏูุฉ - Introduction**

### **ุงููุดููุฉ ุงูุชูููุฏูุฉ - Traditional Problem:**

ุนูุฏูุง ุชุฑูุฏ ุงูุญุตูู ุนูู ุจูุงูุงุช ูู Serverุ ุงูุทุฑููุฉ ุงูุชูููุฏูุฉ ูู:

```
Flutter App โ HTTP Request โ Server โ HTTP Response โ Flutter App
```

**ุงููุดููุฉ:**
- โ ูุฌุจ ุฃู ุชุทูุจ ุงูุจูุงูุงุช ูู ูู ูุฑุฉ
- โ Server ูุง ูุณุชุทูุน ุฅุฑุณุงู ุจูุงูุงุช ุชููุงุฆูุงู
- โ ุงุชุตุงู ูุคูุช (ูููุทุน ุจุนุฏ ูู request)

---

## โ **ุงูุญู: WebSocket**

### **ูุง ูู WebSocketุ**

**WebSocket** ูู ุจุฑูุชูููู ุงุชุตุงู ููุชุญ **ููุงุฉ ุงุชุตุงู ูุณุชูุฑุฉ** ุจูู Client ู Server.

```
Flutter App โโ WebSocket Connection โโ Server
     (ุงุชุตุงู ูุณุชูุฑ - ูุง ูููุทุน)
```

**ุงููููุฒุงุช:**
- โ ุงุชุตุงู ูุณุชูุฑ (ูุง ูููุทุน)
- โ Server ููููู ุฅุฑุณุงู ุจูุงูุงุช ุชููุงุฆูุงู
- โ Client ููููู ุฅุฑุณุงู ุจูุงูุงุช ูู ุฃู ููุช
- โ ุฃุณุฑุน ูู HTTP (ูุง ุญุงุฌุฉ ูุฅูุดุงุก connection ุฌุฏูุฏ ูู ูุฑุฉ)

---

## ๐ **ุงููุฑู ุจูู HTTP ู WebSocket**

### **HTTP (ุงูุทุฑููุฉ ุงูุชูููุฏูุฉ):**

```
1. Flutter ูุทูุจ ุจูุงูุงุช โ Server
2. Server ูุฑุฏ โ Flutter
3. ุงูุงุชุตุงู ูููุทุน โ
4. Flutter ูุทูุจ ุจูุงูุงุช ุฌุฏูุฏุฉ โ Server (ุงุชุตุงู ุฌุฏูุฏ)
5. Server ูุฑุฏ โ Flutter
6. ุงูุงุชุตุงู ูููุทุน โ
... ูููุฐุง
```

**ุงููุดููุฉ:** ูุฌุจ ุฃู ุชุทูุจ ูู ูู ูุฑุฉ!

---

### **WebSocket (ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ):**

```
1. Flutter ูุชุตู โ Server
2. ุงูุงุชุตุงู ูุจูู ููุชูุญ โ
3. Flutter ูุฑุณู ุจูุงูุงุช โ Server (ูู ุฃู ููุช)
4. Server ูุฑุณู ุจูุงูุงุช โ Flutter (ูู ุฃู ููุช)
5. ุงูุงุชุตุงู ูุจูู ููุชูุญ โ
6. ... ูุณุชูุฑ ุงูุงุชุตุงู
```

**ุงููููุฒุงุช:** ุงุชุตุงู ูุณุชูุฑุ Server ููููู ุงูุฅุฑุณุงู ุชููุงุฆูุงู!

---

## ๐ฑ **ูุซุงู ุนููู - Real Example**

### **ุณููุงุฑูู: ุชุชุจุน ูููุน ุงูุณุงุฆู**

#### **ุจุงุณุชุฎุฏุงู HTTP (ุงูุทุฑููุฉ ุงููุฏููุฉ):**

```dart
// ูุฌุจ ุฃู ุชุทูุจ ุงููููุน ูู 5 ุซูุงูู
Timer.periodic(Duration(seconds: 5), (timer) {
  // HTTP Request
  http.get('https://api.com/location/driver/123');
  // ุงูุงุชุตุงู ูููุทุน ุจุนุฏ ูู request
});
```

**ุงููุดุงูู:**
- โ ุงุณุชููุงู ุจุทุงุฑูุฉ ุนุงูู
- โ ุงุณุชููุงู ุจูุงูุงุช ุนุงูู
- โ ุชุฃุฎูุฑ ูู ุงูุชุญุฏูุซุงุช

---

#### **ุจุงุณุชุฎุฏุงู WebSocket (ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ):**

```dart
// ุงุชุตุงู ูุงุญุฏ ููุท
final channel = WebSocketChannel.connect(
  Uri.parse('wss://api.com/ws/location'),
);

// Server ูุฑุณู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู
channel.stream.listen((message) {
  // ุงุณุชูุจุงู ุชุญุฏูุซุงุช ุงููููุน ุชููุงุฆูุงู
  updateDriverLocation(message);
});
```

**ุงููููุฒุงุช:**
- โ ุงุชุตุงู ูุงุญุฏ ููุท
- โ Server ูุฑุณู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู
- โ ุงุณุชููุงู ุฃูู ููุจุทุงุฑูุฉ ูุงูุจูุงูุงุช
- โ ุชุญุฏูุซุงุช ููุฑูุฉ

---

## ๐ **ููู ูุนูู WebSocketุ**

### **1. ุงูุงุชุตุงู (Handshake):**

```
Flutter: "ุฃุฑูุฏ ุงูุงุชุตุงู ุจู WebSocket"
Server: "ุญุณูุงูุ ุงูุงุชุตุงู ููุชูุญ โ"
```

### **2. ุงูุงุชุตุงู ููุชูุญ:**

```
Flutter โโ Server
(ููุงุฉ ุงุชุตุงู ูุณุชูุฑุฉ)
```

### **3. ุฅุฑุณุงู ูุงุณุชูุจุงู:**

```
Flutter โ Server: "ุชุญุฏูุซ ูููุนู: lat=30.0444, lng=31.2357"
Server โ Flutter: "ูููุน ุงูุณุงุฆู 123: lat=30.0444, lng=31.2357"
Server โ Flutter: "ูููุน ุงูุณุงุฆู 123: lat=30.0445, lng=31.2358"
Server โ Flutter: "ูููุน ุงูุณุงุฆู 123: lat=30.0446, lng=31.2359"
... (ุชุญุฏูุซุงุช ูุณุชูุฑุฉ)
```

### **4. ุฅุบูุงู ุงูุงุชุตุงู:**

```
Flutter: "ุฃุฑูุฏ ุฅุบูุงู ุงูุงุชุตุงู"
Server: "ุชู ุฅุบูุงู ุงูุงุชุตุงู โ"
```

---

## ๐ **ููุงุฑูุฉ ุณุฑูุนุฉ - Quick Comparison**

| ุงูููุฒุฉ | HTTP | WebSocket |
|--------|------|-----------|
| ููุน ุงูุงุชุตุงู | ูุคูุช (ูููุทุน) | ูุณุชูุฑ (ูุจูู ููุชูุญ) |
| ูู ูุจุฏุฃ ุงูุงุชุตุงู | Client ููุท | Client ูุจุฏุฃุ ุซู ููุชูุญ ููุทุฑููู |
| ุฅุฑุณุงู ุชููุงุฆู ูู Server | โ ูุง | โ ูุนู |
| ุงูุณุฑุนุฉ | ุฃุจุทุฃ (ุงุชุตุงู ุฌุฏูุฏ ูู ูุฑุฉ) | ุฃุณุฑุน (ุงุชุตุงู ูุงุญุฏ) |
| ุงูุงุณุชุฎุฏุงู | ุตูุญุงุช ููุจุ APIs | ุชุทุจููุงุช Real-time |

---

## ๐ฏ **ูุชู ุชุณุชุฎุฏู WebSocketุ**

### **โ ุงุณุชุฎุฏู WebSocket ุนูุฏูุง:**

1. **ุชุทุจููุงุช Real-time:**
   - ุชุชุจุน ุงููููุน (ูุซู Uber)
   - ุฏุฑุฏุดุฉ (Chat)
   - ุชุญุฏูุซุงุช ููุฑูุฉ (Notifications)

2. **ุชุทุจููุงุช ุชุญุชุงุฌ ุชุญุฏูุซุงุช ูุณุชูุฑุฉ:**
   - ุฃุณุนุงุฑ ุงูุฃุณูู
   - ูุชุงุฆุฌ ุงููุจุงุฑูุงุช
   - ุญุงูุฉ ุงูุทูุจุงุช

3. **ุชุทุจููุงุช ุชุญุชุงุฌ ุงุชุตุงู ูุณุชูุฑ:**
   - ุฃูุนุงุจ Online
   - Collaboration Tools

---

### **โ ูุง ุชุณุชุฎุฏู WebSocket ุนูุฏูุง:**

1. **ุตูุญุงุช ููุจ ุนุงุฏูุฉ** - ุงุณุชุฎุฏู HTTP
2. **APIs ุจุณูุทุฉ** - ุงุณุชุฎุฏู REST API
3. **ูุง ุชุญุชุงุฌ ุชุญุฏูุซุงุช ููุฑูุฉ** - ุงุณุชุฎุฏู HTTP

---

## ๐ **WebSocket ูู ูุดุฑูุนู**

### **ูู Backend (ASP.NET Core):**

```csharp
// WebSocket Middleware ูุฏูุฑ ุงูุงุชุตุงูุงุช
app.UseWebSockets();
app.UseMiddleware<WebSocketMiddleware>();

// Endpoint: /ws/location
```

### **ูู Flutter:**

```dart
// Package: web_socket_channel
final channel = WebSocketChannel.connect(
  Uri.parse('wss://api.com/ws/location'),
);
```

---

## ๐ **ููุฎุต - Summary**

**WebSocket = ุงุชุตุงู ูุณุชูุฑ ุจูู Client ู Server**

- โ ุงุชุตุงู ูุงุญุฏ ูุจูู ููุชูุญ
- โ Server ููููู ุงูุฅุฑุณุงู ุชููุงุฆูุงู
- โ Client ููููู ุงูุฅุฑุณุงู ูู ุฃู ููุช
- โ ุฃุณุฑุน ูุฃูุซุฑ ููุงุกุฉ ูู HTTP ููู Real-time

**ูุซู ุงููุงุชู:**
- HTTP = ุฅุฑุณุงู ุฑุณุงูุฉ ูุตูุฉ (ูุฌุจ ุฃู ุชุฑุณู ูู ูู ูุฑุฉ)
- WebSocket = ููุงููุฉ ูุงุชููุฉ (ุงูุงุชุตุงู ููุชูุญุ ููููู ุงูุชุญุฏุซ ูู ุฃู ููุช)

---

**ุงูุขู ุฏุนูุง ูุชุนูู ููููุฉ ุงูุงุฎุชุจุงุฑ!** โฌ๏ธ

